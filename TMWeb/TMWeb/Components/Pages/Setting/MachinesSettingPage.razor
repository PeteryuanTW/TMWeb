@page "/MachinesSetting"
@rendermode InteractiveServer

<MachinesSetting ActionCallback="@GetActionCallback" MachineNavCallback="@GetMachineNavCallback"></MachinesSetting>

@code {
    // private IEnumerable<ConnectionTypeWrapperClass> ConnectTypes => MachineTypeEnumHelper.GetConnectTypesWrapperClass();


    // IGrid? grid { get; set; }
    // private IEnumerable<Machine> machines;
    // private Machine? taregtMachine;
    // private bool machineSelected => taregtMachine != null;
    // private bool popupVisible;

    // private IEnumerable<Process> processes;
    // private IEnumerable<TagCategory> tagCategories;
    // private IEnumerable<TagCategory> tagCategoriesWithFilter => machineSelected ? tagCategories.Where(x => x.ConnectionType == taregtMachine.ConnectionType) : new List<TagCategory>();

    // private IEnumerable<LogicStatusCategory> logicStatusCategories;
    // private IEnumerable<ErrorCodeCategory> errorCodeCategories;

    // protected override async Task OnInitializedAsync()
    // {
    //     await InitParam();
    //     await base.OnInitializedAsync();
    // }
    // private async Task InitParam()
    // {
    //     machines = await shopfloorService.GetAllMachinesConfig();
    //     processes = await shopfloorService.GetAllProcess();
    //     tagCategories = await shopfloorService.GetAllTagCategories();
    //     logicStatusCategories = await shopfloorService.GetCustomStatusAndConditions();
    //     errorCodeCategories = await shopfloorService.GetErrorCodeTables();
    // }

    // private void MachineSelected(GridFocusedRowChangedEventArgs args)
    // {
    //     taregtMachine = args.DataItem as Machine;
    // }

    // private void ShowMachinePopup()
    // {
    //     popupVisible = true;
    // }

    // private async void CloseMachinePopup()
    // {
    //     popupVisible = false;
    //     await InitParam();
    // }

    // private void NewMachineClicked()
    // {
    //     taregtMachine = new(Guid.NewGuid());
    //     ShowMachinePopup();
    // }

    // private async Task UpsertMachine()
    // {
    //     var res = await shopfloorService.UpsertMachineConfig(taregtMachine);
    //     CloseMachinePopup();
    //     uiService.ShowToast(res);
    // }

    // private void ShowDelete()
    // {
    //     grid.ShowDataItemDeleteConfirmation(taregtMachine);
    // }

    // private async Task DeleteMachine()
    // {
    //     var res = await shopfloorService.DeleteMachine(taregtMachine);
    //     await InitParam();
    //     uiService.ShowToast(res);
    // }

    // private void NavToMachine()
    // {
    //     nav.NavigateTo($"/Machine/{taregtMachine.Id}");
    // }



    private void GetActionCallback(RequestResult res)
    {
        uiService.ShowToast(res);
    }

    private void GetMachineNavCallback(Guid id)
    {
        nav.NavigateTo($"/Machine/{id}");
    }
}
